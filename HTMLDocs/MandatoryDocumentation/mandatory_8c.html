<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Mandatory: mandatory.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>mandatory.c File Reference</h1>
<p>This program lets the Nibo drive free by passing obstacles automatically.  
<a href="#_details">More...</a></p>
<code>#include &lt;nibo/niboconfig.h&gt;</code><br/>
<code>#include &lt;nibo/iodefs.h&gt;</code><br/>
<code>#include &lt;nibo/bot.h&gt;</code><br/>
<code>#include &lt;nibo/display.h&gt;</code><br/>
<code>#include &lt;nibo/gfx.h&gt;</code><br/>
<code>#include &lt;nibo/delay.h&gt;</code><br/>
<code>#include &lt;nibo/copro.h&gt;</code><br/>
<code>#include &lt;nibo/spi.h&gt;</code><br/>
<code>#include &lt;avr/interrupt.h&gt;</code><br/>
<code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;nibo/leds.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="mandatory_8c.html">batterystatus.h</a>&quot;</code><br/>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mandatory_8c.html#ad72dbcf6d0153db1b8d8a58001feed83">DEBUG</a>&nbsp;&nbsp;&nbsp;0</td></tr>
<tr><td colspan="2"><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mandatory_8c.html#a94b1da2e055fff4d143aa6aa891f79a9">STATES</a> { <br/>
&nbsp;&nbsp;<b>NO_OBSTACLE</b>, 
<b>OBSTACLE_FRONT</b>, 
<b>OBSTACLE_LEFT</b>, 
<b>OBSTACLE_RIGHT</b>, 
<br/>
&nbsp;&nbsp;<b>OBSTACLE_SIDES</b>, 
<b>OBSTACLE_DEADEND</b>
<br/>
 }</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mandatory_8c.html#a809f5a768f924de447998ce75b3a05bd">writeToDisplay</a> (char *output)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mandatory_8c.html#adaf487f84c38e060c84f3cb829e70f2b">turnLeft</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mandatory_8c.html#acf4fa5da14085c3a9a170f9de29d2755">turnRight</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mandatory_8c.html#a2f85c61590cd70b1d8d8b34bdb9af288">hardRight</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mandatory_8c.html#a3963fd324f4cc427263bcc4af00411e1">hardLeft</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mandatory_8c.html#a30349830653a3198e1a0b9ea840f192d">checkSides</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mandatory_8c.html#a5041af642c0c2b2c5341e89c957d46cb">driveBackwards</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mandatory_8c.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a> ()</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mandatory_8c.html#afb1166322b63b2223cf926ca242750e7">currentState</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a08fb99b9cf4a882bb750a9664993f26f"></a><!-- doxytag: member="mandatory.c::threshold_slopes" ref="a08fb99b9cf4a882bb750a9664993f26f" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>threshold_slopes</b> = 90</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a13c15453a1fea76db7f10b481aecaefc"></a><!-- doxytag: member="mandatory.c::threshold_front" ref="a13c15453a1fea76db7f10b481aecaefc" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>threshold_front</b> = 100</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a53e962a6882de634d13153a6cadbed9e"></a><!-- doxytag: member="mandatory.c::threshold_sides" ref="a53e962a6882de634d13153a6cadbed9e" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>threshold_sides</b> = 45</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>This program lets the Nibo drive free by passing obstacles automatically. </p>
<dl class="author"><dt><b>Author:</b></dt><dd>Philip Mitzlaff &amp; Benedikt Petschelt </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd>23.11.2018 </dd></dl>
<dl class="version"><dt><b>Version:</b></dt><dd>1.0 </dd></dl>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="ad72dbcf6d0153db1b8d8a58001feed83"></a><!-- doxytag: member="mandatory.c::DEBUG" ref="ad72dbcf6d0153db1b8d8a58001feed83" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG&nbsp;&nbsp;&nbsp;0</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>if DEBUG is 0 than the Nibo shows the distances visual on the display else if DEBUG is 1 than the Nibo shows the different states on the display </p>

</div>
</div>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="a94b1da2e055fff4d143aa6aa891f79a9"></a><!-- doxytag: member="mandatory.c::STATES" ref="a94b1da2e055fff4d143aa6aa891f79a9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="mandatory_8c.html#a94b1da2e055fff4d143aa6aa891f79a9">STATES</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>state machine with the 6 possible states </p>

<p><div class="fragment"><pre class="fragment"><a name="l00047"></a>00047             {
<a name="l00048"></a>00048         NO_OBSTACLE,
<a name="l00049"></a>00049         OBSTACLE_FRONT,
<a name="l00050"></a>00050         OBSTACLE_LEFT,
<a name="l00051"></a>00051         OBSTACLE_RIGHT,
<a name="l00052"></a>00052         OBSTACLE_SIDES,
<a name="l00053"></a>00053         OBSTACLE_DEADEND
<a name="l00054"></a>00054 };
</pre></div></p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a30349830653a3198e1a0b9ea840f192d"></a><!-- doxytag: member="mandatory.c::checkSides" ref="a30349830653a3198e1a0b9ea840f192d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void checkSides </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The Nibo turns left if the distance sensor 0 is higher than the sensor 4 or otherwise turn right </p>

<p><div class="fragment"><pre class="fragment"><a name="l00124"></a>00124                   {
<a name="l00125"></a>00125         copro_update();
<a name="l00126"></a>00126         <span class="keywordflow">if</span> (copro_distance[0] / 256 &gt; copro_distance[4] / 256) {
<a name="l00127"></a>00127                 <a class="code" href="mandatory_8c.html#adaf487f84c38e060c84f3cb829e70f2b">turnLeft</a>();
<a name="l00128"></a>00128         } <span class="keywordflow">else</span> {
<a name="l00129"></a>00129                 <a class="code" href="mandatory_8c.html#acf4fa5da14085c3a9a170f9de29d2755">turnRight</a>();
<a name="l00130"></a>00130         }
<a name="l00131"></a>00131         <span class="keywordflow">return</span>;
<a name="l00132"></a>00132 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5041af642c0c2b2c5341e89c957d46cb"></a><!-- doxytag: member="mandatory.c::driveBackwards" ref="a5041af642c0c2b2c5341e89c957d46cb" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void driveBackwards </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The Nibo drives backwards until the distance of one of the side sensors is lower than a specific threshold and does a 90 degree turn in the opposite direction or if both sensors are lower than the threshold the Nibo turns right </p>

<p><div class="fragment"><pre class="fragment"><a name="l00139"></a>00139                       {
<a name="l00140"></a>00140         leds_set_status(LEDS_ORANGE, 0);
<a name="l00141"></a>00141         leds_set_status(LEDS_ORANGE, 1);
<a name="l00142"></a>00142         copro_setSpeed(-10, -10);
<a name="l00143"></a>00143         <span class="keywordflow">while</span> (1 == 1) {
<a name="l00144"></a>00144                 copro_update();
<a name="l00145"></a>00145                 <span class="keywordflow">if</span> (copro_distance[0] / 256 &lt; 20 &amp;&amp; copro_distance[4] / 256 &lt; 20) {
<a name="l00146"></a>00146                         delay(500);
<a name="l00147"></a>00147                         copro_stop();
<a name="l00148"></a>00148                         leds_set_status(LEDS_OFF, 0);
<a name="l00149"></a>00149                         leds_set_status(LEDS_OFF, 1);
<a name="l00150"></a>00150                         <a class="code" href="mandatory_8c.html#a2f85c61590cd70b1d8d8b34bdb9af288">hardRight</a>();
<a name="l00151"></a>00151                         <span class="keywordflow">return</span>;
<a name="l00152"></a>00152                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (copro_distance[0] / 256 &lt; 20) {
<a name="l00153"></a>00153                         delay(500);
<a name="l00154"></a>00154                         copro_stop();
<a name="l00155"></a>00155                         leds_set_status(LEDS_OFF, 0);
<a name="l00156"></a>00156                         leds_set_status(LEDS_OFF, 1);
<a name="l00157"></a>00157                         <a class="code" href="mandatory_8c.html#a2f85c61590cd70b1d8d8b34bdb9af288">hardRight</a>();
<a name="l00158"></a>00158                         <span class="keywordflow">return</span>;
<a name="l00159"></a>00159                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (copro_distance[4] / 256 &lt; 20) {
<a name="l00160"></a>00160                         delay(500);
<a name="l00161"></a>00161                         copro_stop();
<a name="l00162"></a>00162                         leds_set_status(LEDS_OFF, 0);
<a name="l00163"></a>00163                         leds_set_status(LEDS_OFF, 1);
<a name="l00164"></a>00164                         <a class="code" href="mandatory_8c.html#a3963fd324f4cc427263bcc4af00411e1">hardLeft</a>();
<a name="l00165"></a>00165                         <span class="keywordflow">return</span>;
<a name="l00166"></a>00166                 }
<a name="l00167"></a>00167                 delay(500);
<a name="l00168"></a>00168         }
<a name="l00169"></a>00169 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3963fd324f4cc427263bcc4af00411e1"></a><!-- doxytag: member="mandatory.c::hardLeft" ref="a3963fd324f4cc427263bcc4af00411e1" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hardLeft </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The Nibo turns 90 degree in the left direction </p>

<p><div class="fragment"><pre class="fragment"><a name="l00111"></a>00111                 {
<a name="l00112"></a>00112         copro_stop();
<a name="l00113"></a>00113         leds_set_status(LEDS_ORANGE, 3);
<a name="l00114"></a>00114         copro_setTargetRel(-27, 27, 10);
<a name="l00115"></a>00115         delay(2000);
<a name="l00116"></a>00116         leds_set_status(LEDS_OFF, 3);
<a name="l00117"></a>00117         <span class="keywordflow">return</span>;
<a name="l00118"></a>00118 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a2f85c61590cd70b1d8d8b34bdb9af288"></a><!-- doxytag: member="mandatory.c::hardRight" ref="a2f85c61590cd70b1d8d8b34bdb9af288" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hardRight </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The Nibo turns 90 degree in the right direction </p>

<p><div class="fragment"><pre class="fragment"><a name="l00099"></a>00099                  {
<a name="l00100"></a>00100         copro_stop();
<a name="l00101"></a>00101         leds_set_status(LEDS_ORANGE, 6);
<a name="l00102"></a>00102         copro_setTargetRel(27, -27, 10);
<a name="l00103"></a>00103         delay(2000);
<a name="l00104"></a>00104         leds_set_status(LEDS_OFF, 6);
<a name="l00105"></a>00105         <span class="keywordflow">return</span>;
<a name="l00106"></a>00106 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae66f6b31b5ad750f1fe042a706a4e3d4"></a><!-- doxytag: member="mandatory.c::main" ref="ae66f6b31b5ad750f1fe042a706a4e3d4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>main function of the manatory.c file </p>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p><p>endless loop of the main function</p>
<p>query each sensor and set a specific state if several thresholds are reached</p>
<p>set a specific method to avoid the obstacles dependent on which state is active</p>
</p>

<p><div class="fragment"><pre class="fragment"><a name="l00175"></a>00175            {
<a name="l00176"></a>00176         sei();
<a name="l00177"></a>00177         bot_init();
<a name="l00178"></a>00178         spi_init();
<a name="l00179"></a>00179 
<a name="l00180"></a>00180         display_init();
<a name="l00181"></a>00181         gfx_init();
<a name="l00182"></a>00182         leds_init();
<a name="l00183"></a>00183 
<a name="l00184"></a>00184         copro_ir_startMeasure();
<a name="l00185"></a>00185 
<a name="l00189"></a>00189         <span class="keywordflow">while</span> (1 == 1) {
<a name="l00190"></a>00190                 copro_setSpeed(10, 10);
<a name="l00191"></a>00191                 copro_update();
<a name="l00192"></a>00192 
<a name="l00196"></a>00196                 <span class="keywordflow">if</span> (copro_distance[2] / 256 &gt;= threshold_front) {
<a name="l00197"></a>00197                         <span class="keywordflow">if</span> ((copro_distance[0] / 256 &gt;= threshold_sides
<a name="l00198"></a>00198                                         &amp;&amp; copro_distance[4] / 256 &gt;= threshold_sides)
<a name="l00199"></a>00199                                         || (copro_distance[1] / 256 &gt;= threshold_slopes
<a name="l00200"></a>00200                                                         &amp;&amp; copro_distance[3] / 256 &gt;= threshold_slopes)) {
<a name="l00201"></a>00201                                 <a class="code" href="mandatory_8c.html#afb1166322b63b2223cf926ca242750e7">currentState</a> = OBSTACLE_DEADEND;
<a name="l00202"></a>00202                         } <span class="keywordflow">else</span> {
<a name="l00203"></a>00203                                 <a class="code" href="mandatory_8c.html#afb1166322b63b2223cf926ca242750e7">currentState</a> = OBSTACLE_FRONT;
<a name="l00204"></a>00204                         }
<a name="l00205"></a>00205                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (copro_distance[1] / 256 &gt;= threshold_slopes
<a name="l00206"></a>00206                                 &amp;&amp; copro_distance[3] / 256 &lt; threshold_slopes) {
<a name="l00207"></a>00207                         <a class="code" href="mandatory_8c.html#afb1166322b63b2223cf926ca242750e7">currentState</a> = OBSTACLE_RIGHT;
<a name="l00208"></a>00208                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (copro_distance[3] / 256 &gt;= threshold_slopes
<a name="l00209"></a>00209                                 &amp;&amp; copro_distance[1] / 256 &lt; threshold_slopes) {
<a name="l00210"></a>00210                         <a class="code" href="mandatory_8c.html#afb1166322b63b2223cf926ca242750e7">currentState</a> = OBSTACLE_LEFT;
<a name="l00211"></a>00211                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (copro_distance[4] / 256 &gt;= threshold_sides
<a name="l00212"></a>00212                                 &amp;&amp; copro_distance[0] / 256 &gt;= threshold_sides) {
<a name="l00213"></a>00213                         <a class="code" href="mandatory_8c.html#afb1166322b63b2223cf926ca242750e7">currentState</a> = OBSTACLE_SIDES;
<a name="l00214"></a>00214                 } <span class="keywordflow">else</span> {
<a name="l00215"></a>00215                         <a class="code" href="mandatory_8c.html#afb1166322b63b2223cf926ca242750e7">currentState</a> = NO_OBSTACLE;
<a name="l00216"></a>00216                 }
<a name="l00217"></a>00217 
<a name="l00218"></a>00218                 <span class="keywordflow">if</span> (<a class="code" href="mandatory_8c.html#ad72dbcf6d0153db1b8d8a58001feed83">DEBUG</a> == 0) {
<a name="l00219"></a>00219                         gfx_fill(0);
<a name="l00220"></a>00220                         <a class="code" href="batterystatus_8c.html#acd85abcb918a8b788daa0d53b060b316">batteryStatus</a>();
<a name="l00221"></a>00221                         <a class="code" href="showdistance_8c.html#ad660e8ae1d1f6c1ff15912e86ba8fc9d">showDistance</a>(copro_distance[0] / 256, copro_distance[1] / 256,
<a name="l00222"></a>00222                                         copro_distance[2] / 256, copro_distance[3] / 256,
<a name="l00223"></a>00223                                         copro_distance[4] / 256);
<a name="l00224"></a>00224                 }
<a name="l00228"></a>00228                 <span class="keywordflow">switch</span> (<a class="code" href="mandatory_8c.html#afb1166322b63b2223cf926ca242750e7">currentState</a>) {
<a name="l00229"></a>00229                 <span class="keywordflow">case</span> NO_OBSTACLE:
<a name="l00230"></a>00230                         <span class="keywordflow">if</span> (<a class="code" href="mandatory_8c.html#ad72dbcf6d0153db1b8d8a58001feed83">DEBUG</a> == 1) {
<a name="l00231"></a>00231                                 <a class="code" href="mandatory_8c.html#a809f5a768f924de447998ce75b3a05bd">writeToDisplay</a>(<span class="stringliteral">&quot;NO OBSTACLE&quot;</span>);
<a name="l00232"></a>00232                         }
<a name="l00233"></a>00233                         <span class="keywordflow">break</span>;
<a name="l00234"></a>00234                 <span class="keywordflow">case</span> OBSTACLE_FRONT:
<a name="l00235"></a>00235                         copro_stop();
<a name="l00236"></a>00236                         <span class="keywordflow">if</span> (<a class="code" href="mandatory_8c.html#ad72dbcf6d0153db1b8d8a58001feed83">DEBUG</a> == 1) {
<a name="l00237"></a>00237                                 <a class="code" href="mandatory_8c.html#a809f5a768f924de447998ce75b3a05bd">writeToDisplay</a>(<span class="stringliteral">&quot;OBSTACLE: FRONT&quot;</span>);
<a name="l00238"></a>00238                         }
<a name="l00239"></a>00239                         <a class="code" href="mandatory_8c.html#a30349830653a3198e1a0b9ea840f192d">checkSides</a>();
<a name="l00240"></a>00240                         <span class="keywordflow">break</span>;
<a name="l00241"></a>00241                 <span class="keywordflow">case</span> OBSTACLE_LEFT:
<a name="l00242"></a>00242                         <span class="keywordflow">if</span> (<a class="code" href="mandatory_8c.html#ad72dbcf6d0153db1b8d8a58001feed83">DEBUG</a> == 1) {
<a name="l00243"></a>00243                                 <a class="code" href="mandatory_8c.html#a809f5a768f924de447998ce75b3a05bd">writeToDisplay</a>(<span class="stringliteral">&quot;OBSTACLE: LEFT&quot;</span>);
<a name="l00244"></a>00244                         }
<a name="l00245"></a>00245                         <a class="code" href="mandatory_8c.html#acf4fa5da14085c3a9a170f9de29d2755">turnRight</a>();
<a name="l00246"></a>00246                         <span class="keywordflow">break</span>;
<a name="l00247"></a>00247                 <span class="keywordflow">case</span> OBSTACLE_RIGHT:
<a name="l00248"></a>00248                         <span class="keywordflow">if</span> (<a class="code" href="mandatory_8c.html#ad72dbcf6d0153db1b8d8a58001feed83">DEBUG</a> == 1) {
<a name="l00249"></a>00249                                 <a class="code" href="mandatory_8c.html#a809f5a768f924de447998ce75b3a05bd">writeToDisplay</a>(<span class="stringliteral">&quot;OBSTACLE: RIGHT&quot;</span>);
<a name="l00250"></a>00250                         }
<a name="l00251"></a>00251                         <a class="code" href="mandatory_8c.html#adaf487f84c38e060c84f3cb829e70f2b">turnLeft</a>();
<a name="l00252"></a>00252                         <span class="keywordflow">break</span>;
<a name="l00253"></a>00253                 <span class="keywordflow">case</span> OBSTACLE_SIDES:
<a name="l00254"></a>00254                         <span class="keywordflow">if</span> (<a class="code" href="mandatory_8c.html#ad72dbcf6d0153db1b8d8a58001feed83">DEBUG</a> == 1) {
<a name="l00255"></a>00255                                 <a class="code" href="mandatory_8c.html#a809f5a768f924de447998ce75b3a05bd">writeToDisplay</a>(<span class="stringliteral">&quot;OBSTACLE: TUNNEL&quot;</span>);
<a name="l00256"></a>00256                         }
<a name="l00257"></a>00257                         <span class="keywordflow">break</span>;
<a name="l00258"></a>00258                 <span class="keywordflow">case</span> OBSTACLE_DEADEND:
<a name="l00259"></a>00259                         copro_stop();
<a name="l00260"></a>00260                         <span class="keywordflow">if</span> (<a class="code" href="mandatory_8c.html#ad72dbcf6d0153db1b8d8a58001feed83">DEBUG</a> == 1) {
<a name="l00261"></a>00261                                 <a class="code" href="mandatory_8c.html#a809f5a768f924de447998ce75b3a05bd">writeToDisplay</a>(<span class="stringliteral">&quot;OBSTACLE: DEADEND&quot;</span>);
<a name="l00262"></a>00262                         }
<a name="l00263"></a>00263                         <a class="code" href="mandatory_8c.html#a5041af642c0c2b2c5341e89c957d46cb">driveBackwards</a>();
<a name="l00264"></a>00264                         <span class="keywordflow">break</span>;
<a name="l00265"></a>00265                 }
<a name="l00266"></a>00266                 delay(500);
<a name="l00267"></a>00267         }
<a name="l00268"></a>00268 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="adaf487f84c38e060c84f3cb829e70f2b"></a><!-- doxytag: member="mandatory.c::turnLeft" ref="adaf487f84c38e060c84f3cb829e70f2b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void turnLeft </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>lets the Nibo turn left until a specific threshold for sensor 1 and 2 is reached </p>

<p><div class="fragment"><pre class="fragment"><a name="l00066"></a>00066                 {
<a name="l00067"></a>00067         copro_setSpeed(-10, 10);
<a name="l00068"></a>00068         leds_set_status(LEDS_ORANGE, 3);
<a name="l00069"></a>00069         <span class="keywordflow">while</span> (1 == 1) {
<a name="l00070"></a>00070                 copro_update();
<a name="l00071"></a>00071                 <span class="keywordflow">if</span> (((copro_distance[2] / 256) &lt; 50)
<a name="l00072"></a>00072                                 &amp;&amp; ((copro_distance[1] / 256) &lt; 30)) {
<a name="l00073"></a>00073                         copro_stop();
<a name="l00074"></a>00074                         leds_set_status(LEDS_OFF, 3);
<a name="l00075"></a>00075                         <span class="keywordflow">break</span>;
<a name="l00076"></a>00076                 }
<a name="l00077"></a>00077         }
<a name="l00078"></a>00078 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="acf4fa5da14085c3a9a170f9de29d2755"></a><!-- doxytag: member="mandatory.c::turnRight" ref="acf4fa5da14085c3a9a170f9de29d2755" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void turnRight </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>lets the Nibo turn right until a specific threshold for sensor 2 and 3 is reached </p>

<p><div class="fragment"><pre class="fragment"><a name="l00082"></a>00082                  {
<a name="l00083"></a>00083         copro_setSpeed(10, -10);
<a name="l00084"></a>00084         leds_set_status(LEDS_ORANGE, 6);
<a name="l00085"></a>00085         <span class="keywordflow">while</span> (1 == 1) {
<a name="l00086"></a>00086                 copro_update();
<a name="l00087"></a>00087                 <span class="keywordflow">if</span> (((copro_distance[2] / 256) &lt; 50)
<a name="l00088"></a>00088                                 &amp;&amp; ((copro_distance[3] / 256) &lt; 30)) {
<a name="l00089"></a>00089                         copro_stop();
<a name="l00090"></a>00090                         leds_set_status(LEDS_OFF, 6);
<a name="l00091"></a>00091                         <span class="keywordflow">break</span>;
<a name="l00092"></a>00092                 }
<a name="l00093"></a>00093         }
<a name="l00094"></a>00094 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a809f5a768f924de447998ce75b3a05bd"></a><!-- doxytag: member="mandatory.c::writeToDisplay" ref="a809f5a768f924de447998ce75b3a05bd" args="(char *output)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void writeToDisplay </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>output</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>function to write something on the display </p>

<p><div class="fragment"><pre class="fragment"><a name="l00057"></a>00057                                   {
<a name="l00058"></a>00058         gfx_fill(0);
<a name="l00059"></a>00059         gfx_move(0, 0);
<a name="l00060"></a>00060         gfx_print_text(output);
<a name="l00061"></a>00061         <span class="keywordflow">return</span>;
<a name="l00062"></a>00062 }
</pre></div></p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="afb1166322b63b2223cf926ca242750e7"></a><!-- doxytag: member="mandatory.c::currentState" ref="afb1166322b63b2223cf926ca242750e7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="mandatory_8c.html#afb1166322b63b2223cf926ca242750e7">currentState</a> = 0</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>set the initial state to NO_OBSTACLE and define the thresholds for slopes, front and sides </p>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address style="text-align: right;"><small>Generated on Fri Dec 14 14:31:59 2018 for Mandatory by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
